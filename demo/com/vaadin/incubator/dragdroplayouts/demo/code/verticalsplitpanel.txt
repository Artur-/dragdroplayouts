// Create a drag & drop horizontal split panel
final DDVerticalSplitPanel panel = new DDVerticalSplitPanel();

// Enable dragging
panel.setDragMode(LayoutDragMode.CLONE);

// Enable dropping
panel.setDropHandler(new DropHandler() {

    public AcceptCriterion getAcceptCriterion() {
        // Only accept drags from the vertical button layout or self
        // and
        // do not allow dropping on the spacer
        return new And(new Or(new SourceIs(btns), SourceIsTarget
                .get()), new Not(HorizontalLocationIs.CENTER));
    }

    public void drop(DragAndDropEvent event) {
        // Casting to a layout bound transferable since we know it
        // comes from the vertical layout
        LayoutBoundTransferable transferable = (LayoutBoundTransferable) event
                .getTransferable();

        Component component = transferable.getComponent();

        ComponentContainer source = (ComponentContainer) transferable
                .getSourceComponent();

        // Get the drop details
        VerticalSplitPanelTargetDetails details = (VerticalSplitPanelTargetDetails) event
                .getTargetDetails();

        // Remove component from vertical layout
        source.removeComponent(component);

        // Add a new button to the vertical layout
        source.addComponent(new Button("Button " + buttonCount++));

        if (details.getDropLocation() == VerticalDropLocation.TOP) {
            // Dropped in the left area
            panel.setFirstComponent(component);

        } else if (details.getDropLocation() == VerticalDropLocation.BOTTOM) {
            // Dropped in the right area
            panel.setSecondComponent(component);
        }
    }
});